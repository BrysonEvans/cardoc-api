# ───────── cardoc-api – Render service definition ──────────
services:
  - type: web
    name: cardoc-api
    env: python
    plan: starter        # or whatever tier you’re on

    # ---------- Build container (read-only) ----------
    buildCommand: |
      pip install --upgrade pip
      pip install -r requirements.txt

    # ---------- Runtime container (disk is mounted) ----------
    startCommand: |
      gunicorn app:app \
        --bind 0.0.0.0:$PORT \
        --workers 2 \
        --threads 4 \
        --timeout 120          # ← no --worker-class gevent

    disks:
      - name: cardoc-models
        mountPath: /var/models
        sizeGB: 1
